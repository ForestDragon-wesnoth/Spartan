#textdomain wesnoth-Hoplite

#define HOPLITE_GUIDE_MENU
[option]
        image="icons/book.png"
	description=_"Basic Rules"
	[command]
  		 [message]
	           speaker=narrator
                   caption="Hoplite Guide: Basic Rules"
		   image=portraits/book.png
#ifdef MULTIPLAYER
                   side_for=$side_number
#endif
                   message=_"-You only have 1 movement point (like most enemies in the add-on), and your turn automatically ends when you move and/or attack.
-all units (both the player and the enemies) have 0% defense everywhere, and are unable to retaliate
-In order to progress, move to the hex 6,2 (marked by a trapdoor). You will then move to the next depth.
-there is no rest healing (unless you have the 'Rest II' upgrade), but you recover a third of your max hitpoints worth of health upon descending a depth
-the depths are semi-randomized, with a random map/enemy list. However, depth 1 is always a cave map with orc grunts.
-enemies have long-ranged/short-ranged attacks (explained more in the 'Combat' section of the guide)
-each depth, there are upgrade forges on the map. (explained more in the 'Forges/Upgrades' section of the guide). However they become rarer in the later depths
-dungeons are generated while you move onto the exit, and not in advance, meaning that it's possible to save-scum to get a different map/enemy generation for a given depth (with boss depths being an exception)
-every now and then, you may encounter various objects on the map, like signposts, tombstones, etc. that display text when moved onto. Most of them don't affect gameplay, and exist solely to add lore."
		 [/message]
        [/command]
[/option]
[option]
        image="icons/book.png"
	description=_"Combat"
	[command]
  		 [message]
	           speaker=narrator
                   caption="Hoplite Guide: Combat"
		   image=portraits/book.png
#ifdef MULTIPLAYER
                   side_for=$side_number
#endif
                   message=_"-all units (both the player and the enemies) have 0% defense everywhere, and most are unable to retaliate unless they have the 'counterattack' weapon special
-While the shield bash does next to no damage, it can knock back enemies and slow them, effectively rending them immobile for a turn. You can also kill some enemies by bashing them into lava, and harm most by 5 damage when bashing into a wall.
-certain enemies, like archers, are able to attack from afar in a line. Their attacks have a 1-turn charge time, and their targeted hexes are highlighted yellow red or blue if there is a unit they can attack.
-On the other hand, enemies with the short-ranged weapon special (like orcish grunts) can only attack you if you've been next to them on the previous turn, making them relatively easy targets.
-enemies are unable to attack when slowed.
-some enemies are able to spawn other enemies at regular intervals (like demiliches).
-enemies have increased hitpoints in multiplayer (5 extra hitpoints for normal enemies, and a 66% hitpoint increase (as well as a 33% damage increase) for bosses)"
		 [/message]
        [/command]
[/option]
[option]
        image="icons/book.png"
	description=_"Energy/Leaping"
	[command]
  		 [message]
	           speaker=narrator
                   caption="Hoplite Guide: Energy/Leaping"
		   image=portraits/book.png
#ifdef MULTIPLAYER
                   side_for=$side_number
#endif
                   message=_"Leaping is an ability that can be accessed via a rightclick menu on the leader unit. It allows him to move 2 hexes (3 if you have the Teleport II upgrade) for a turn, as well as to jump over enemies/unwalkable terrain, but costs 50 energy. You start with full energy each time you enter a depth (the default is 100, but can be increased by energy upgrades). You also gain energy when killing enemies, equal to the target's level times 10 (5 energy for lvl0 enemies.) by default. Units killed by allies also give energy, but only half as much as normal (in multiplayer, both players get it though). When hitting bosses you also gain energy equal to their level times 5. You gain an extra 50 maximum energy after retrieving the Prometheus' Fire artifact."
		 [/message]
        [/command]
[/option]
[option]
        image="icons/book.png"
	description=_"Forges/Upgrades"
	[command]
  		 [message]
	           speaker=narrator
                   caption="Hoplite Guide: Forges/Upgrades"
		   image=portraits/book.png
#ifdef MULTIPLAYER
                   side_for=$side_number
#endif
                   message=_"Every depth (every 2 depths if you're past depth 20, or every 3 depths past 40), there will be a forge randomly placed on the map. Moving onto one will allow you to choose from a list of upgrades. Some upgrades require other upgrades to be unlocked in order to be available (like 'Improved Armor II' only appearing after you unlock the normal 'Improved Armor' upgrade), and some require both unlocking a certain upgrade AND beating a certain boss in the current playthrouh (like 'Improved Armor III', for example, which requires beating the spider queen)"
		 [/message]
        [/command]
[/option]
[option]
        image="icons/book.png"
	description=_"Spear Throwing"
	[command]
  		 [message]
	           speaker=narrator
                   caption="Hoplite Guide: Spear Throwing"
		   image=portraits/book.png
#ifdef MULTIPLAYER
                   side_for=$side_number
#endif
                   message=_"To throw your spear, choose the righclick menu option on an enemy that is standing in a 2-hex (larger with certain upgrades) radius from you. When thrown, the spear will deal 10 damage to the target, and apply the 'slowed' effect if the target is not killed. The spear can be then picked up by moving to the hex you throw it to (and is picked up automatically when proceeding to the next depth), but until then, you won't be able to use your melee spear attack, leaving you quite vulnerable. This downside can be removed for the first throw on each depth if you take the 'Harpoon' upgrade (and the second too, if you have Harpoon II)."
		 [/message]
        [/command]
[/option]
[option]
        image="icons/book.png"
	description= _"Flame Blast"
	[command]
  		 [message]
	           speaker=narrator
                   caption="Hoplite Guide: Flame Blast"
		   image=portraits/book.png
#ifdef MULTIPLAYER
                   side_for=$side_number
#endif
                   message=_"Flame blast is a ranged attack, available after the harpoon upgrade and beating the archmage, used alongside the rest of your arsenal. The flame blast is aimed quite differently from the spear throw: you must righclick on an adjacent hex to yourself and the flame blast will appear in that direction, harming all enemies in the way (the targeted hexes are highlighted in red). The ability is then put on a 4-turn cooldown."
		 [/message]
        [/command]
[/option]
[option]
        image="icons/book.png"
	description=_"Achievements"
	[command]
  		 [message]
	           speaker=narrator
                   caption="Hoplite Guide: Achievements"
		   image=portraits/book.png
#ifdef MULTIPLAYER
                   side_for=$side_number
#endif
                   message=_"Over the course of a playthrough, you may earn achievements, like reaching a specific depths, killing a specific amount of enemies, etc. Their completion is announced by a popup on the screen. The list of your achievements (as well as ones you're yet to complete) can be accessed via the information menu. Achievements carry over between playthroughs of the campaign."#, and unlock upgrades (TODO)
		 [/message]
        [/command]
[/option]
[option]
        image="icons/book.png"
	description=_"Allies"
	[command]
  		 [message]
	           speaker=narrator
                   caption="Hoplite Guide: Allies"
		   image=portraits/book.png
#ifdef MULTIPLAYER
                   side_for=$side_number
#endif
                   message=_"Certain upgrades, such as Rat tamer or Shadow Clone allow you to summon AI-controlled allies at the start of each depth or via a rightclick menu respectively. Most allies disappear whenever you descend a depth. If they block your way, you can push them via rightclick menu, or order them where to go via a rightclick menu on the unit and then the tile you want the ally to go to. These two options can also be used to move them out of archers' line of fire in advance, for example. Additionally, you may encounter allies with the 'companion' ability, meaning that they carry over between depths, recovering 50% of their hitpoints with each descent, and don't permanently die, instead fleeing and returning after a few depths. They also have dialog"
		 [/message]
        [/command]
[/option]
#enddef

#define HOPLITE_INFO_MENU
    [event]
       name=start
    [set_menu_item]
        id=hoplite_infomenu
        description=_"Information Menu"
        image=items/book2.png~CROP(21,23,27,24)~SCALE(20,20)
#        [show_if]
#	  [have_unit]
#	     id=Hoplite
#	     x,y=$x1,$y1
#	  [/have_unit]
#	  [and]
#	    [variable]
#	       name=hoplite_debug
#	       equals=yes
#	    [/variable]
#	  [/and]
#        [/show_if]
        [command]
	[message]
		speaker=narrator
		caption="Hoplite Information menu"
                message="Select option:"
#ifdef MULTIPLAYER
                   side_for=$side_number
#endif
                [option]
                  	image="misc/red-x.png"
			description=_"Return to the Game"
			[command]
                        [/command]
		[/option]
                [option]
                        image="terrain/forge-working.png"
			description="Show the list of all upgrades you currently have."
			[command]
			{VARIABLE hoplite_showcurrentupgrades yes}
                        [while]
                         [variable]
                            name=hoplite_showcurrentupgrades
                            equals=yes
                         [/variable]
                         [do]
     			 [message]
		           speaker=narrator
	                   caption="Hoplite Upgrade List"
                           message=""
#ifdef MULTIPLAYER
                           side_for=$side_number
#endif
                           [option]
                  	    image="misc/red-x.png"
 			    description=_"Return to the Game"
			    [command]
			      {CLEAR_VARIABLE hoplite_showcurrentupgrades}
                            [/command]
                    	   [/option]
                    	   {FORGE_UPGRADE_LIST}
                         [/message]
			 [/do]
			[/while]
	                [/command]
	       [/option]
               [option]
                        image="terrain/forge-working.png"
			description="Show the list of all upgrades your teammate currently has."
			[show_if]
			  {VARIABLE_CONDITIONAL hoplite_multiplayer equals yes}
			[/show_if]
			[command]
			{VARIABLE hoplite_showcurrentupgrades2 yes}
                        [while]
                         [variable]
                            name=hoplite_showcurrentupgrades2
                            equals=yes
                         [/variable]
                         [do]
     			 [message]
		           speaker=narrator
	                   caption="Hoplite Upgrade List (of your teammate)"
                           message=""
#ifdef MULTIPLAYER
                           side_for=$side_number
#endif
                           [option]
                  	    image="misc/red-x.png"
 			    description=_"Return to the Game"
			    [command]
			      {CLEAR_VARIABLE hoplite_showcurrentupgrades2}
                            [/command]
                    	   [/option]
                    	   {FORGE_UPGRADE_LIST}
                         [/message]
			 [/do]
			[/while]
	                [/command]
	       [/option]
               [option]                        
			image="icons/book.png"
			description="Hoplite Guide"
			[command]
			{VARIABLE hopliteguide_menu yes}
                        [while]
                         [variable]
                            name=hopliteguide_menu
                            equals=yes
                         [/variable]
                         [do]
     			 [message]
		           speaker=narrator
	                   caption="Hoplite Guide"
                           message="Choose topic:"
			   image=portraits/book.png
#ifdef MULTIPLAYER
                           side_for=$side_number
#endif
                           [option]
                  	    image="misc/red-x.png"
 			    description=_"Return to the Game"
			    [command]
			      {CLEAR_VARIABLE hopliteguide_menu}
                            [/command]
                    	   [/option]
			   {HOPLITE_GUIDE_MENU}
			 [/message]
                         [/do]
			[/while]
	                [/command]
	       [/option]
#               [option]                        
#			image="icons/book2.png"
#			description="Enemy Catalog"
#			[command]
#			{VARIABLE hopliteenemycatalog_menu yes}
#                        [while]
#                         [variable]
#                            name=hopliteenemycatalog_menu
#                            equals=yes
#                         [/variable]
#                         [do]
#     			 [message]
#		           speaker=narrator
#	                   caption="Enemy catalog:"
#                           message="Choose entry to learn more about a specific enemy type (more entries appear as you encounter more types of foes):"
#			   image=portraits/book.png
##ifdef MULTIPLAYER
#                           side_for=$side_number
##endif
#                           [option]
#                  	    image="misc/red-x.png"
# 			    description=_"Return to the Game"
#			    [command]
#			      {CLEAR_VARIABLE hopliteenemycatalog_menu}
#                            [/command]
#                    	   [/option]
#			   {HOPLITE_ENEMYCATALOG_MENU}
#			 [/message]
#                         [/do]
#			[/while]
#	                [/command]
#	       [/option]
               [option]
			image="misc/laurel.png"
			description="Achivements"
			[command]
			{VARIABLE hopliteachievement_menu yes}
#only needed for local mp so that achievements don't desync between the two sides
      #ifdef LOCALMP
      {HOPLITE_ACHIEVEMENTLIST RETREIVE_ACHIEVEMENT}
      #endif
      {HOPLITE_CREATE_ACHIEVEMENT_DIALOG_OPTIONS}
                        [while]
                         [variable]
                            name=hopliteachievement_menu
                            equals=yes
                         [/variable]
                         [do]

           [message]
                speaker=narrator
                     caption="Achievements:"
                           message="Here are the achivements that you either completed, or are yet to complete (completed achievements are labeled with golden laurels, while incomplete ones are labeled with bronze laurels or question marks):"
       #        image=portraits/book.png
                image=misc/laurel.png~SCALE(216,216)
                           [option]
                        image="misc/red-x.png"
          description=_"Return to the Game"
          [command]
            {CLEAR_VARIABLE hopliteachievement_menu}
                            [/command]
                         [/option]
               [insert_tag]
                   name=option
                   variable=hoplite_achievement_options
               [/insert_tag]
                           [option]
                        image="misc/laurel.png~BLIT(misc/red-x.png~SCALE(72,72))"
          description=_"Wipe your achievement progress, and all achievements you completed."
          [command]
                     [message]
                           speaker=narrator
                               caption="Achievements:"
                                   message="Are you really sure you want to wipe your achivements? (This option can't be undone)"
                   image=misc/laurel.png~SCALE(216,216)
           sound={SOUND_LIST:LICH_HIT}
#ifdef MULTIPLAYER
                                   side_for=$side_number
#endif
                                   [option]
                                  image="misc/red-x.png"
                    description=_"No, of course not. I clicked this by accident."
                    [command]
                      {CLEAR_VARIABLE hopliteachievement_menu}
                                    [/command]
                             [/option]
                                   [option]
                                  image="misc/blank-hex.png"
                    description=_"Yes, I know what I'm doing."
                    [command]
              {FLASH_WHITE (
              [sound]
                 name=lightning.ogg
                    [/sound])}
                                      [print]
                                         text= _ "Achievements reset!"
                                         size=25
                                         red=255
                               duration=3000
                                      [/print]
                                      {HOPLITE_ACHIEVEMENTLIST CLEAR_ACHIEVEMENT}
                                      {HOPLITE_ACHIEVEMENTLIST RETREIVE_ACHIEVEMENT}
                      {CLEAR_VARIABLE hopliteachievement_menu}
                                    [/command]
                             [/option]
           [/message]
           [/command]
           [/option]
                           [option]
                        image="scenery/trapdoor-open.png~BLIT(misc/red-x.png~SCALE(72,72))"
          description=_"Clear the starting depth options."
#ifdef MULTIPLAYER
                           side_for=$side_number
#endif
          [command]
                     [message]
                           speaker=narrator
                               caption="Achievements:"
                                   message="Are you really sure you want to wipe your progress so far? (This option can't be undone)"
                   image=misc/laurel.png~SCALE(216,216)
           sound={SOUND_LIST:LICH_HIT}
#ifdef MULTIPLAYER
                                   side_for=$side_number
#endif
                                   [option]
                                  image="misc/red-x.png"
                    description=_"No, of course not. I clicked this by accident."
                    [command]
                      {CLEAR_VARIABLE hopliteachievement_menu}
                                    [/command]
                             [/option]
                                   [option]
                                  image="misc/blank-hex.png"
                    description=_"Yes, I know what I'm doing."
                    [command]
              {FLASH_WHITE (
              [sound]
                 name=lightning.ogg
                    [/sound])}
                                      [print]
                                         text= _ "Starting depths reset!"
                                         size=25
                                         red=255
                               duration=3000
                                      [/print]
                                      [clear_global_variable]
                                         namespace=hoplite
                                         global=hoplite_depth11_unlocked
                                         side=$side_number
                                         immediate=yes
                                      [/clear_global_variable]
                                      [clear_global_variable]
                                         namespace=hoplite
                                         global=hoplite_depth21_unlocked
                                         side=$side_number
                                         immediate=yes
                                      [/clear_global_variable]
                                      [clear_global_variable]
                                         namespace=hoplite
                                         global=hoplite_depth0_unlocked
                                         side=$side_number
                                         immediate=yes
                                      [/clear_global_variable]
                                      [clear_global_variable]
                                         namespace=hoplite
                                         global=hoplite_depth99_unlocked
                                         side=$side_number
                                         immediate=yes
                                      [/clear_global_variable]
                      {CLEAR_VARIABLE hopliteachievement_menu}
                                    [/command]
                             [/option]
                     [/message]         
                            [/command]
                         [/option]
       [/message]
                         [/do]
      [/while]
      {CLEAR_VARIABLE hoplite_achievement_options}
                  [/command]
         [/option]

           [/message]
	[/command]
    [/set_menu_item]
    [/event]
#enddef
